# Trust & Security Architecture Overview

## System Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ContentSellify Platform                          â”‚
â”‚                    Trust & Security Features Architecture                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PRODUCT UPLOAD FLOW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  Seller Uploads Product                                          â”‚
â”‚         â†“                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ product.         â”‚                                           â”‚
â”‚  â”‚ controller.js    â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚           â”‚                                                      â”‚
â”‚           â”œâ”€â†’ 1. Extract PDF Metadata â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚           â”‚    (previewGenerator.js)                      â”‚      â”‚
â”‚           â”‚    â€¢ Real page count                          â”‚      â”‚
â”‚           â”‚    â€¢ PDF text content                         â”‚      â”‚
â”‚           â”‚    â€¢ Document info                            â”‚      â”‚
â”‚           â”‚                                               â†“      â”‚
â”‚           â”‚                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚           â”œâ”€â†’ 2. Scan for Malware â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚  Product    â”‚â”‚
â”‚           â”‚    (virusTotalScanner.js)             â”‚  Document   â”‚â”‚
â”‚           â”‚    â€¢ Check file hash (cache)          â”‚             â”‚â”‚
â”‚           â”‚    â€¢ Upload to VirusTotal             â”‚ pageCount   â”‚â”‚
â”‚           â”‚    â€¢ Get threat analysis              â”‚ virusTotal* â”‚â”‚
â”‚           â”‚    â€¢ Fallback basic check             â”‚ malwareScan*â”‚â”‚
â”‚           â”‚                                        â”‚ reviewFlags*â”‚â”‚
â”‚           â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”œâ”€â†’ 3. Auto Content Review â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚    (contentReview.js)                                â”‚
â”‚           â”‚    â€¢ Check page count threshold                      â”‚
â”‚           â”‚    â€¢ Validate file size                              â”‚
â”‚           â”‚    â€¢ Price anomaly detection                         â”‚
â”‚           â”‚    â€¢ Calculate quality score                         â”‚
â”‚           â”‚                                                       â”‚
â”‚           â””â”€â†’ 4. Save Product + Scan Results                     â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ REVIEW & RATING FLOW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  Buyer Purchases Product                                         â”‚
â”‚         â†“                                                         â”‚
â”‚  Order Completed â”€â”€â”€â”€â”€â†’ Can Review Product                      â”‚
â”‚         â†“                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ ProductReviews   â”‚                                           â”‚
â”‚  â”‚ Component        â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚           â”‚                                                      â”‚
â”‚           â”œâ”€â†’ Submit Review â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚           â”‚    â€¢ Rating (1-5 stars)           â”‚                 â”‚
â”‚           â”‚    â€¢ Comment (max 1000 chars)     â”‚                 â”‚
â”‚           â”‚    â€¢ Verify purchase via orderId  â”‚                 â”‚
â”‚           â”‚                                    â†“                 â”‚
â”‚           â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚           â”‚                             â”‚   Review    â”‚         â”‚
â”‚           â”‚                             â”‚  Document   â”‚         â”‚
â”‚           â”‚                             â”‚             â”‚         â”‚
â”‚           â”œâ”€â†’ Seller Response â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ rating      â”‚         â”‚
â”‚           â”‚    â€¢ Reply to review        â”‚ comment     â”‚         â”‚
â”‚           â”‚    â€¢ respondedAt timestamp  â”‚ seller      â”‚         â”‚
â”‚           â”‚                             â”‚ Response    â”‚         â”‚
â”‚           â”‚                             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚                                    â”‚                 â”‚
â”‚           â””â”€â†’ Display Reviews â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                â€¢ Rating distribution                             â”‚
â”‚                â€¢ Average rating                                  â”‚
â”‚                â€¢ Helpful votes                                   â”‚
â”‚                                                                   â”‚
â”‚           Auto-Update Seller Rating â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚           (sellerStats.js)                            â”‚          â”‚
â”‚                                                        â†“          â”‚
â”‚                                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                                 â”‚    User     â”‚  â”‚
â”‚                                                 â”‚  (Seller)   â”‚  â”‚
â”‚                                                 â”‚             â”‚  â”‚
â”‚                                                 â”‚ avgRating   â”‚  â”‚
â”‚                                                 â”‚ ratingCount â”‚  â”‚
â”‚                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SELLER PROFILE FLOW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  User Clicks Seller Name                                         â”‚
â”‚         â†“                                                         â”‚
â”‚  /seller/:sellerId                                               â”‚
â”‚         â†“                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ Seller Profile   â”‚                                           â”‚
â”‚  â”‚ Page             â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚           â”‚                                                      â”‚
â”‚           â”œâ”€â†’ Fetch Seller Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚           â”‚    â€¢ Profile info                  â”‚                 â”‚
â”‚           â”‚    â€¢ Total sales                   â”‚                 â”‚
â”‚           â”‚    â€¢ Product count                 â”‚                 â”‚
â”‚           â”‚    â€¢ Average rating                â”‚                 â”‚
â”‚           â”‚    â€¢ Identity verified âœ…          â”‚                 â”‚
â”‚           â”‚                                    â”‚                 â”‚
â”‚           â”œâ”€â†’ Fetch Products (paginated) â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚           â”‚    â€¢ Published products            â”‚                 â”‚
â”‚           â”‚    â€¢ With thumbnails               â”‚                 â”‚
â”‚           â”‚                                    â”‚                 â”‚
â”‚           â””â”€â†’ Fetch Reviews (paginated) â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚                â€¢ Buyer reviews                 â”‚                 â”‚
â”‚                â€¢ With seller responses         â”‚                 â”‚
â”‚                                                â”‚                 â”‚
â”‚           Display in Tabs:                     â”‚                 â”‚
â”‚           â€¢ Products Tab â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚           â€¢ Reviews Tab                                          â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ADMIN SECURITY DASHBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  Admin Login â†’ /dashboard/admin/security                        â”‚
â”‚         â†“                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚           Security Dashboard (3 Tabs)                â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€ TAB 1: MALWARE SCANS ğŸ¦  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                                                       â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚  â”‚ Stats:                                       â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  â€¢ Total Scans: 1,234                       â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  â€¢ Clean Products: 1,180 (95.6%)            â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  â€¢ With Detections: 54                      â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  â€¢ Basic Check Only: 102                    â”‚   â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â”‚                                                       â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚  â”‚ High Threat Products:                       â”‚   â”‚       â”‚
â”‚  â”‚  â”‚                                              â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  Product: "Suspicious.pdf"                  â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  Seller: john@example.com                   â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  Malicious: 12 ğŸ¦   Suspicious: 5            â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  [View VirusTotal] [Manage Product]        â”‚   â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€ TAB 2: CONTENT REVIEW ğŸ” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                                                       â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚  â”‚ Queue Summary:                               â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  â€¢ Total: 23                                 â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  â€¢ High Severity: 5 ğŸ”´                       â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  â€¢ Medium: 12 ğŸŸ¡  Low: 6 ğŸŸ¢                  â”‚   â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â”‚                                                       â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚  â”‚ Flagged Product:                            â”‚   â”‚       â”‚
â”‚  â”‚  â”‚                                              â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  Title: "Quick Guide" [HIGH]               â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  Seller: jane@example.com                   â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  Price: â‚¹49                                 â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  Quality Score: 32/100                      â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  Flags: [Low page count] [Small file]      â”‚   â”‚       â”‚
â”‚  â”‚  â”‚  [âœ… Approve] [âŒ Reject] [View]            â”‚   â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€ TAB 3: IDENTITY VERIFICATION âœ… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                                                       â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚  â”‚ Pending Verifications: 8                    â”‚   â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â”‚                                                       â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚  â”‚ Seller: Alice Cooper                        â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ Email: alice@example.com                    â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ Phone: +91-9876543210                       â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ Total Sales: 45                             â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ Rating: â­ 4.7                              â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ Member since: Jan 2023                      â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ [âœ… Verify Identity] [âŒ Reject] [Profile] â”‚   â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ DATA MODEL RELATIONSHIPS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Product   â”‚       â”‚   Review    â”‚       â”‚    User     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ _id         â”‚â—„â”€â”€â”€â”€â”€â”€â”¤ productId   â”‚       â”‚ _id         â”‚  â”‚
â”‚  â”‚ title       â”‚       â”‚ buyerId     â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚ name        â”‚  â”‚
â”‚  â”‚ sellerId    â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚ sellerId    â”‚       â”‚ email       â”‚  â”‚
â”‚  â”‚ price       â”‚       â”‚ orderId     â”‚       â”‚ role        â”‚  â”‚
â”‚  â”‚             â”‚       â”‚ rating      â”‚       â”‚             â”‚  â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚ comment     â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚
â”‚  â”‚ pageCount   â”‚       â”‚             â”‚       â”‚ avgRating   â”‚  â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚ ratingCount â”‚  â”‚
â”‚  â”‚ virusTotal* â”‚       â”‚ seller      â”‚       â”‚ identity*   â”‚  â”‚
â”‚  â”‚ malware*    â”‚       â”‚ Response    â”‚       â”‚ verified    â”‚  â”‚
â”‚  â”‚ reviewFlags â”‚       â”‚   text      â”‚       â”‚             â”‚  â”‚
â”‚  â”‚ review      â”‚       â”‚   responded â”‚       â”‚             â”‚  â”‚
â”‚  â”‚ Severity    â”‚       â”‚   At        â”‚       â”‚             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚  â”‚   Order     â”‚                                                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                â”‚
â”‚  â”‚ _id         â”‚â—„â”€â”€â”€ Verify purchase for reviews               â”‚
â”‚  â”‚ buyerId     â”‚                                                â”‚
â”‚  â”‚ productId   â”‚                                                â”‚
â”‚  â”‚ status      â”‚                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ EXTERNAL INTEGRATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  VirusTotal API v3                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 1. GET /files/{hash}/analyses                         â”‚      â”‚
â”‚  â”‚    â†’ Check if file already scanned (cache hit)        â”‚      â”‚
â”‚  â”‚                                                         â”‚      â”‚
â”‚  â”‚ 2. POST /files                                         â”‚      â”‚
â”‚  â”‚    â†’ Upload new file for scanning                     â”‚      â”‚
â”‚  â”‚                                                         â”‚      â”‚
â”‚  â”‚ 3. GET /analyses/{analysisId}                         â”‚      â”‚
â”‚  â”‚    â†’ Poll for scan results                            â”‚      â”‚
â”‚  â”‚                                                         â”‚      â”‚
â”‚  â”‚ Rate Limits (Free Tier):                              â”‚      â”‚
â”‚  â”‚  â€¢ 4 requests/minute                                   â”‚      â”‚
â”‚  â”‚  â€¢ 500 requests/day                                    â”‚      â”‚
â”‚  â”‚  â€¢ 178,000 requests/month                             â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                   â”‚
â”‚  pdf-parse Library                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ const pdfData = await pdfParse(buffer);               â”‚      â”‚
â”‚  â”‚                                                         â”‚      â”‚
â”‚  â”‚ Returns:                                               â”‚      â”‚
â”‚  â”‚  â€¢ numpages: Exact page count                         â”‚      â”‚
â”‚  â”‚  â€¢ text: Full text content                            â”‚      â”‚
â”‚  â”‚  â€¢ info: PDF metadata (title, author, etc.)           â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NOTIFICATION FLOW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  Events that trigger notifications:                              â”‚
â”‚                                                                   â”‚
â”‚  1. Product Upload                                               â”‚
â”‚     â””â”€â†’ Malware detected â†’ Notify seller                        â”‚
â”‚                                                                   â”‚
â”‚  2. Review Submitted                                             â”‚
â”‚     â””â”€â†’ New review â†’ Notify seller                              â”‚
â”‚                                                                   â”‚
â”‚  3. Seller Response                                              â”‚
â”‚     â””â”€â†’ Response added â†’ Notify buyer                           â”‚
â”‚                                                                   â”‚
â”‚  4. Content Review                                               â”‚
â”‚     â”œâ”€â†’ Approved â†’ Notify seller                                â”‚
â”‚     â””â”€â†’ Rejected â†’ Notify seller (with reason)                  â”‚
â”‚                                                                   â”‚
â”‚  5. Identity Verification                                        â”‚
â”‚     â”œâ”€â†’ Verified â†’ Notify seller (âœ… badge earned)              â”‚
â”‚     â””â”€â†’ Rejected â†’ Notify seller (with notes)                   â”‚
â”‚                                                                   â”‚
â”‚  Notification Channels:                                          â”‚
â”‚  â€¢ In-app notifications (NotificationDropdown)                   â”‚
â”‚  â€¢ Email (optional - can be added)                              â”‚
â”‚  â€¢ Push notifications (optional - can be added)                 â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SECURITY LAYERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  Layer 1: Upload Validation                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ File type checking (PDF, videos, etc.)                â”‚   â”‚
â”‚  â”‚ â€¢ File size limits                                       â”‚   â”‚
â”‚  â”‚ â€¢ Extension validation                                   â”‚   â”‚
â”‚  â”‚ â€¢ Magic number verification                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  Layer 2: Malware Scanning                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ VirusTotal multi-engine scan (70+ engines)            â”‚   â”‚
â”‚  â”‚ â€¢ Hash-based caching (avoid re-scans)                   â”‚   â”‚
â”‚  â”‚ â€¢ Threat severity classification                        â”‚   â”‚
â”‚  â”‚ â€¢ Fallback basic checks                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  Layer 3: Content Review                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Low page count detection                              â”‚   â”‚
â”‚  â”‚ â€¢ File size anomalies                                    â”‚   â”‚
â”‚  â”‚ â€¢ Price validation                                       â”‚   â”‚
â”‚  â”‚ â€¢ Suspicious keywords                                    â”‚   â”‚
â”‚  â”‚ â€¢ Quality score calculation                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  Layer 4: Identity Verification                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Manual admin verification                             â”‚   â”‚
â”‚  â”‚ â€¢ Verification badge system                             â”‚   â”‚
â”‚  â”‚ â€¢ Trust indicators on profile                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  Layer 5: Social Proof                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Buyer reviews and ratings                             â”‚   â”‚
â”‚  â”‚ â€¢ Seller response capability                            â”‚   â”‚
â”‚  â”‚ â€¢ Review helpful votes                                   â”‚   â”‚
â”‚  â”‚ â€¢ Public seller profiles                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ KEY METRICS & ANALYTICS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  Platform Health Indicators:                                     â”‚
â”‚                                                                   â”‚
â”‚  Malware Protection:                                             â”‚
â”‚  â€¢ Clean rate: 95%+ target                                       â”‚
â”‚  â€¢ Detection coverage: 70+ antivirus engines                     â”‚
â”‚  â€¢ Response time: Real-time on upload                           â”‚
â”‚                                                                   â”‚
â”‚  Content Quality:                                                â”‚
â”‚  â€¢ Quality score: 60+ for approval                              â”‚
â”‚  â€¢ Manual review queue: <24h resolution time                    â”‚
â”‚  â€¢ False positive rate: <5%                                      â”‚
â”‚                                                                   â”‚
â”‚  Trust Signals:                                                  â”‚
â”‚  â€¢ Average rating: 4.0+ stars                                    â”‚
â”‚  â€¢ Review rate: 20%+ of purchases                               â”‚
â”‚  â€¢ Identity verification: 50%+ of sellers                        â”‚
â”‚                                                                   â”‚
â”‚  Admin Efficiency:                                               â”‚
â”‚  â€¢ Security dashboard response time: <1h                        â”‚
â”‚  â€¢ Content review turnaround: <24h                              â”‚
â”‚  â€¢ Identity verification: <48h                                   â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
â”€â”€â”€â”€â”€  Data flow
â—„â”€â”€â”€â”€â–º Bidirectional relationship
[  ]   User interface element
â”Œâ”€â”€â”€â”€â” System component
â”‚    â”‚ Container/boundary
```

## Architecture Highlights

### Scalability Features:
- **Async Processing**: Malware scans don't block uploads
- **Caching**: Hash lookups prevent duplicate scans
- **Pagination**: Reviews and products load incrementally
- **Database Indexes**: Optimized queries on frequently accessed fields

### Security Features:
- **Multi-Layer Defense**: Upload validation, malware scan, content review, identity verification
- **Fallback Mechanisms**: Basic checks when external APIs unavailable
- **Admin Oversight**: Manual review capability for edge cases
- **Audit Trail**: All actions logged with timestamps and reasons

### User Experience:
- **Non-Blocking**: Buyers/sellers can continue working during scans
- **Real-Time Updates**: Reviews appear immediately after submission
- **Social Proof**: Ratings and reviews visible on all product pages
- **Trust Indicators**: Verified badges, rating displays, review counts

### Performance:
- **VirusTotal Cache**: Reduces API calls by 60-80%
- **Lazy Loading**: Reviews and products load on demand
- **Optimized Queries**: MongoDB aggregation pipelines for stats
- **Client-Side Caching**: React state management reduces API calls
